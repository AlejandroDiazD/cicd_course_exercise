/*
Desarrolle un pipeline que informe lo siguiente en base a los días de la semana
Si el día es lunes informe los siguientes calculos matemáticos de 2 numeros: Suma, Resta, Multiplicación, Division
Si el día es Martes informe el usuario que realizo la ejecución con la fecha actual 
Si el día es Miércoles generar un mensaje por consola que informe que se ejecuto el pipeline
Si el día es jueves informar el clima actual en su ciudad (prestablecido en el código)
Si el día es Viernes generar siguiente mensaje de consola "Lo estas haciendo de maravilas!"
*/

pipeline {
    agent any
    environment {
        CITY = 'Madrid'
        WEATHER = 'Cloudy'
        NUM1 = 10
        NUM2 = 5
    }
    stages {
        stage('Determine Day of the Week') {
            steps {
                script {
                    def currentDay = new Date().format('EEEE', TimeZone.getTimeZone('UTC'))
                    def currentDayNumber = new Date().format('u', TimeZone.getTimeZone('UTC'))
                    echo "Today is ${currentDay}"
                    echo "Number day of the week is ${currentDayNumber}"
                    
                    if (currentDayNumber == '1') {      
                        echo 'Monday Math Calculations'
                        def sum = env.NUM1.toInteger() + env.NUM2.toInteger()
                        def subtract = env.NUM1.toInteger() - env.NUM2.toInteger()
                        def multiply = env.NUM1.toInteger() * env.NUM2.toInteger()
                        def divide = env.NUM1.toInteger() / env.NUM2.toInteger()
                        echo "Sum: ${sum}, Subtract: ${subtract}, Multiply: ${multiply}, Divide: ${divide}"

                    } else if (currentDayNumber == '2') {
                        echo 'Tuesday User Info and Date'
                        def user = sh(script: 'whoami', returnStdout: true).trim()
                        def currentDate = new Date().format('yyyy-MM-dd', TimeZone.getTimeZone('UTC'))
                        echo "User: ${user}, Current Date: ${currentDate}"

                    } else if (currentDayNumber == '3') {
                        echo 'Wednesday Pipeline Execution Message'
                        echo "The pipeline has been executed!"

                    } else if (currentDayNumber == '4') {
                        echo 'Thursday Weather Info'
                        echo "The weather in ${env.CITY} is ${env.WEATHER}."

                    } else if (currentDayNumber == '5') {
                        echo 'Friday Encouragement Message'
                        echo "You're doing great!"

                    } else {
                        echo "No specific tasks for today!"
                    }
                }
            }
        }
    }
}
